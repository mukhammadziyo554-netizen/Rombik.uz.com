const translations = {
  uz: {
    langLabel: "UZ",
    nav: {
      decor: "Dekor",
      textiles: "Tekstil",
      lighting: "Yoritish",
      kitchen: "Oshxona",
      kids: "Bolalar",
      sale: "Chegirma"
    },
    common: {
      home: "Bosh sahifa",
      search: "Mahsulotlarni qidiring",
      cart: "Savat",
      whatsapp: "WhatsApp",
      addToCart: "Savatga qo'shish",
      quickView: "Tez ko'rish",
      buyNow: "Hozir xarid qilish",
      explore: "Kategoriyalarni ko'rish",
      viewAll: "Hammasini ko'rish",
      continue: "Davom etish",
      checkout: "Buyurtma berish",
      apply: "Qo'llash",
      placeOrder: "Buyurtmani tasdiqlash",
      backHome: "Bosh sahifaga qaytish"
    },
    productDetails: {
      description: "Minimalist dizayn, premium keramika va zamonaviy interyer uchun mos.",
      bulletOne: "2 yil kafolat",
      bulletTwo: "Toshkent bo'ylab yetkazib berish",
      bulletThree: "Qaytarish 14 kun",
      confirmSubtitle: "Operatorimiz siz bilan 15 daqiqa ichida bog'lanadi."
    },
    hero: {
      title: "Uyingiz uchun qulaylik va zamonaviy uslub",
      subtitle: "Rombik.uz - Toshkentdagi premium uy jihozlari va sovg'alar do'koni"
    },
    sections: {
      categories: "Mashhur kategoriyalar",
      bestsellers: "Eng ko'p sotilganlar",
      promo: "20% gacha chegirma",
      trust: "Bizga ishonish sabablari",
      reviews: "Mijozlar fikri",
      whatsappCta: "Savolingiz bormi? WhatsApp orqali yozing"
    },
    trust: {
      fast: "Tez yetkazib berish",
      quality: "Sifat kafolati",
      secure: "Xavfsiz to'lov"
    },
    reviews: {
      one: "Sifatli mahsulotlar va tez xizmat!",
      two: "To'shak to'plami juda yumshoq va chiroyli.",
      three: "WhatsApp orqali tez javob oldim, rahmat!"
    },
    categories: {
      decor: "Uy dekori",
      textiles: "Uy tekstili",
      lighting: "Yoritish",
      kitchen: "Oshxona anjomlari",
      kids: "Bolalar parvarishi",
      gifts: "Uy uchun sovg'alar"
    },
    banner: {
      title: "Toshkent bo'ylab tez yetkazib berish",
      subtitle: "Buyurtmani bugun qabul qiling"
    },
    pages: {
      categoryTitle: "Kategoriya",
      productTitle: "Mahsulot",
      cartTitle: "Savat",
      checkoutTitle: "Tezkor buyurtma",
      deliveryTitle: "Yetkazib berish va to'lov",
      aboutTitle: "Biz haqimizda",
      contactTitle: "Kontaktlar",
      confirmTitle: "Buyurtma tasdiqlandi"
    },
    cart: {
      empty: "Savatda 2 ta mahsulot",
      total: "Jami",
      delivery: "Yetkazib berish",
      discount: "Chegirma",
      subtotal: "Oraliq summa"
    },
    checkout: {
      name: "Ism va familiya",
      phone: "Telefon raqami",
      address: "Manzil",
      city: "Shahar",
      deliveryOption: "Yetkazib berish turi",
      payment: "To'lov usuli",
      comment: "Izoh",
      standard: "Standart (1-2 kun)",
      express: "Ekspress (3-5 soat)",
      paymentOptions: {
        payme: "Payme",
        click: "Click",
        uzcard: "Uzcard",
        cash: "Yetkazib berishda naqd"
      }
    },
    delivery: {
      infoTitle: "Yetkazib berish",
      infoText: "Toshkent bo'ylab 1-2 kun ichida yetkazamiz. 300 000 so'mdan yuqori buyurtmalar bepul.",
      paymentTitle: "To'lov",
      paymentText: "Payme, Click, Uzcard yoki yetkazib berishda naqd to'lash mumkin.",
      faqTitle: "Ko'p so'raladigan savollar",
      faqOne: "Qaytarish muddati 14 kun.",
      faqTwo: "Mahsulotlar original va kafolatli."
    },
    about: {
      storyTitle: "Rombik.uz haqida",
      storyText: "Biz uy jihozlarini zamonaviy dizayn va yuqori sifat bilan taqdim etamiz. Toshkent bo'ylab xizmat ko'rsatamiz.",
      valuesTitle: "Bizning qadriyatlarimiz",
      valuesText: "Ishonch, sifat, tezkor xizmat va qulay xarid tajribasi."
    },
    contact: {
      heading: "Biz bilan bog'laning",
      address: "Toshkent, O'zbekiston",
      hours: "Ish vaqti: 10:00 - 23:00",
      phone: "Telefon: +998 99 002 29 92",
      formTitle: "Xabar yuboring"
    },
    footer: {
      contact: "Kontaktlar",
      hours: "Ish vaqti",
      social: "Ijtimoiy tarmoqlar",
      delivery: "Yetkazib berish",
      faq: "FAQ",
      returns: "Qaytarish siyosati"
    },
    products: {
      p1: "Minimal vazali dekor",
      p2: "Premium yostiq to'plami",
      p3: "LED stol chirog'i",
      p4: "Seramika krujka",
      p5: "Bolalar uchun to'plam",
      p6: "Uy uchun sovg'a box"
    }
  },
  ru: {
    langLabel: "RU",
    nav: {
      decor: "Декор",
      textiles: "Текстиль",
      lighting: "Освещение",
      kitchen: "Кухня",
      kids: "Детям",
      sale: "Распродажа"
    },
    common: {
      home: "Главная",
      search: "Поиск товаров",
      cart: "Корзина",
      whatsapp: "WhatsApp",
      addToCart: "В корзину",
      quickView: "Быстрый просмотр",
      buyNow: "Купить сейчас",
      explore: "Смотреть категории",
      viewAll: "Смотреть все",
      continue: "Продолжить",
      checkout: "Оформить заказ",
      apply: "Применить",
      placeOrder: "Подтвердить заказ",
      backHome: "Вернуться на главную"
    },
    productDetails: {
      description: "Минималистичный дизайн, премиальная керамика и современный интерьер.",
      bulletOne: "Гарантия 2 года",
      bulletTwo: "Доставка по Ташкенту",
      bulletThree: "Возврат 14 дней",
      confirmSubtitle: "Наш менеджер свяжется с вами в течение 15 минут."
    },
    hero: {
      title: "Комфорт и стиль для вашего дома",
      subtitle: "Rombik.uz — премиальные товары для дома и подарков в Ташкенте"
    },
    sections: {
      categories: "Популярные категории",
      bestsellers: "Хиты продаж",
      promo: "Скидки до 20%",
      trust: "Почему нам доверяют",
      reviews: "Отзывы клиентов",
      whatsappCta: "Есть вопрос? Напишите в WhatsApp"
    },
    trust: {
      fast: "Быстрая доставка",
      quality: "Гарантия качества",
      secure: "Безопасная оплата"
    },
    reviews: {
      one: "Качественные товары и быстрая доставка!",
      two: "Комплект постельного белья очень мягкий.",
      three: "Ответили в WhatsApp мгновенно, спасибо!"
    },
    categories: {
      decor: "Декор для дома",
      textiles: "Домашний текстиль",
      lighting: "Освещение",
      kitchen: "Кухонные товары",
      kids: "Товары для детей",
      gifts: "Подарки для дома"
    },
    banner: {
      title: "Быстрая доставка по Ташкенту",
      subtitle: "Получите заказ уже сегодня"
    },
    pages: {
      categoryTitle: "Категория",
      productTitle: "Товар",
      cartTitle: "Корзина",
      checkoutTitle: "Быстрое оформление",
      deliveryTitle: "Доставка и оплата",
      aboutTitle: "О нас",
      contactTitle: "Контакты",
      confirmTitle: "Заказ подтвержден"
    },
    cart: {
      empty: "В корзине 2 товара",
      total: "Итого",
      delivery: "Доставка",
      discount: "Скидка",
      subtotal: "Промежуточная сумма"
    },
    checkout: {
      name: "Имя и фамилия",
      phone: "Номер телефона",
      address: "Адрес",
      city: "Город",
      deliveryOption: "Тип доставки",
      payment: "Способ оплаты",
      comment: "Комментарий",
      standard: "Стандарт (1-2 дня)",
      express: "Экспресс (3-5 часов)",
      paymentOptions: {
        payme: "Payme",
        click: "Click",
        uzcard: "Uzcard",
        cash: "Наличные при доставке"
      }
    },
    delivery: {
      infoTitle: "Доставка",
      infoText: "Доставляем по Ташкенту за 1-2 дня. Бесплатно от 300 000 сум.",
      paymentTitle: "Оплата",
      paymentText: "Доступны Payme, Click, Uzcard или наличные при доставке.",
      faqTitle: "Частые вопросы",
      faqOne: "Возврат в течение 14 дней.",
      faqTwo: "Товары оригинальные и с гарантией."
    },
    about: {
      storyTitle: "О Rombik.uz",
      storyText: "Мы предлагаем товары для дома с современным дизайном и высоким качеством. Работаем по Ташкенту.",
      valuesTitle: "Наши ценности",
      valuesText: "Доверие, качество, быстрая доставка и удобный сервис."
    },
    contact: {
      heading: "Свяжитесь с нами",
      address: "Ташкент, Узбекистан",
      hours: "График: 10:00 - 23:00",
      phone: "Телефон: +998 99 002 29 92",
      formTitle: "Отправить сообщение"
    },
    footer: {
      contact: "Контакты",
      hours: "График работы",
      social: "Соцсети",
      delivery: "Доставка",
      faq: "FAQ",
      returns: "Политика возврата"
    },
    products: {
      p1: "Минималистичная ваза",
      p2: "Премиум комплект подушек",
      p3: "LED настольная лампа",
      p4: "Керамическая кружка",
      p5: "Набор для малышей",
      p6: "Подарочный бокс"
    }
  }
};

const defaultLang = localStorage.getItem("rombike_lang") || "uz";

const applyTranslations = (lang) => {
  const dictionary = translations[lang];
  if (!dictionary) return;

  document.documentElement.lang = lang;
  document.querySelectorAll("[data-i18n]").forEach((node) => {
    const key = node.getAttribute("data-i18n");
    const value = key.split(".").reduce((acc, part) => acc && acc[part], dictionary);
    if (value) {
      node.textContent = value;
    }
  });

  document.querySelectorAll("[data-i18n-placeholder]").forEach((node) => {
    const key = node.getAttribute("data-i18n-placeholder");
    const value = key.split(".").reduce((acc, part) => acc && acc[part], dictionary);
    if (value) {
      node.setAttribute("placeholder", value);
    }
  });

  document.querySelectorAll(".lang-switch button").forEach((button) => {
    button.classList.toggle("active", button.dataset.lang === lang);
  });
};

const setLanguage = (lang) => {
  localStorage.setItem("rombike_lang", lang);
  applyTranslations(lang);
};

document.addEventListener("DOMContentLoaded", () => {
  applyTranslations(defaultLang);
  document.querySelectorAll(".lang-switch button").forEach((button) => {
    button.addEventListener("click", () => setLanguage(button.dataset.lang));
  });
});
